gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_rapl.o msr_rapl.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_core.o msr_core.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_common.o msr_common.c
msr_common.c: In function 'poll':
msr_common.c:103: warning: unused variable 'i'
msr_common.c: In function 'msSample':
msr_common.c:290: warning: unused variable 'i'
msr_common.c: At top level:
msr_common.c:92: warning: 'poll' defined but not used
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_pebs.o msr_pebs.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o blr_util.o blr_util.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_turbo.o msr_turbo.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o msr_opt.o msr_opt.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2    -c -o cpuid.o cpuid.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2 -o msr msr_pebs.c msr_rapl.o\
 msr_common.o msr_core.o msr_opt.o blr_util.o -lrt
gcc -shared -Wl,-soname,libmsr.so -o libmsr.so msr_rapl.o blr_util.o msr_core.o msr_turbo.o msr_pebs.o msr_opt.o
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2  -o turbo turbo.c cpuid.c msr_turbo.c msr_core.c
gcc -fPIC -Wall -DTEST_HARNESS -DARCH_SANDY_BRIDGE -DPKG_PERF_STATUS_AVAILABLE -DARCH_062D -O2  -o rapl_clamp rapl_clamp.c msr_core.c cpuid.c msr_rapl.c msr_opt.c blr_util.c
rapl_clamp.c: In function 'main':
rapl_clamp.c:33: warning: unused variable 'status'
make -C mpi
make[1]: Entering directory `/g/g24/rountree/local/src/power/rapl/libmsr/mpi'
./wrap.py -f -g -c -o rapl.c rapl.w

#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>

#ifndef _EXTERN_C_
#ifdef __cplusplus
#define _EXTERN_C_ extern "C"
#else /* __cplusplus */
#define _EXTERN_C_
#endif /* __cplusplus */
#endif /* _EXTERN_C_ */

#ifdef MPICH_HAS_C2F
_EXTERN_C_ void *MPIR_ToPointer(int);
#endif // MPICH_HAS_C2F

#ifdef PIC
/* For shared libraries, declare these weak and figure out which one was linked
   based on which init wrapper was called.  See mpi_init wrappers.  */
#pragma weak pmpi_init
#pragma weak PMPI_INIT
#pragma weak pmpi_init_
#pragma weak pmpi_init__
#endif /* PIC */

_EXTERN_C_ void pmpi_init(MPI_Fint *ierr);
_EXTERN_C_ void PMPI_INIT(MPI_Fint *ierr);
_EXTERN_C_ void pmpi_init_(MPI_Fint *ierr);
_EXTERN_C_ void pmpi_init__(MPI_Fint *ierr);

static int in_wrapper = 0;
Traceback (most recent call last):
  File "./wrap.py", line 1254, in <module>
    file = open(cur_filename)
IOError: [Errno 2] No such file or directory: 'rapl.c'
make[1]: *** [rapl.c] Error 1
make[1]: Leaving directory `/g/g24/rountree/local/src/power/rapl/libmsr/mpi'
make: *** [mpi] Error 2
